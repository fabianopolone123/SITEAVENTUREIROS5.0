{% extends "cadastro_aventureiro/base.html" %}

{% block stage_content %}
  <form method="post">
    {% csrf_token %}
    <div class="section-card">
      <h4>Dados do pai</h4>
      <p class="section-note">Preencha os dados principais do responsável paterno.</p>
      <div class="field-rows">
        {% include 'cadastro_aventureiro/field_row.html' with field=form.father_name label=form.father_name.label %}
        {% include 'cadastro_aventureiro/field_row.html' with field=form.father_cpf label=form.father_cpf.label %}
        {% include 'cadastro_aventureiro/field_row.html' with field=form.father_email label=form.father_email.label %}
        {% include 'cadastro_aventureiro/field_row.html' with field=form.father_phone label=form.father_phone.label %}
      </div>
    </div>

    <div class="section-card">
      <h4>Dados da mãe</h4>
      <p class="section-note">Informe os contatos do responsável materno.</p>
      <div class="field-rows">
        {% include 'cadastro_aventureiro/field_row.html' with field=form.mother_name label=form.mother_name.label %}
        {% include 'cadastro_aventureiro/field_row.html' with field=form.mother_cpf label=form.mother_cpf.label %}
        {% include 'cadastro_aventureiro/field_row.html' with field=form.mother_email label=form.mother_email.label %}
        {% include 'cadastro_aventureiro/field_row.html' with field=form.mother_phone label=form.mother_phone.label %}
      </div>
    </div>

    <div class="section-card">
      <h4>Responsável legal</h4>
      <p class="section-note">Defina quem responde legalmente pelo cadastro e mantenha os contatos atualizados.</p>
      <div class="field-rows">
        {% include 'cadastro_aventureiro/field_row.html' with field=form.legal_type label=form.legal_type.label %}
        {% include 'cadastro_aventureiro/field_row.html' with field=form.legal_name label=form.legal_name.label %}
        {% include 'cadastro_aventureiro/field_row.html' with field=form.legal_relationship label=form.legal_relationship.label %}
        {% include 'cadastro_aventureiro/field_row.html' with field=form.legal_cpf label=form.legal_cpf.label %}
        {% include 'cadastro_aventureiro/field_row.html' with field=form.legal_email label=form.legal_email.label %}
        {% include 'cadastro_aventureiro/field_row.html' with field=form.legal_phone label=form.legal_phone.label %}
        {% include 'cadastro_aventureiro/field_row.html' with field=form.nationality label=form.nationality.label %}
        {% include 'cadastro_aventureiro/field_row.html' with field=form.marital_status label=form.marital_status.label %}
        {% include 'cadastro_aventureiro/field_row.html' with field=form.rg_or_cin label=form.rg_or_cin.label %}
      </div>
    </div>

    <div class="section-card">
      <h4>Endereço do responsável</h4>
      <p class="section-note">O endereço será usado para correspondências oficiais e documentos.</p>
      <div class="field-rows">
        {% include 'cadastro_aventureiro/field_row.html' with field=form.address_line label=form.address_line.label %}
        {% include 'cadastro_aventureiro/field_row.html' with field=form.neighborhood label=form.neighborhood.label %}
        {% include 'cadastro_aventureiro/field_row.html' with field=form.city label=form.city.label %}
        {% include 'cadastro_aventureiro/field_row.html' with field=form.state label=form.state.label %}
        {% include 'cadastro_aventureiro/field_row.html' with field=form.cep label=form.cep.label %}
        {% include 'cadastro_aventureiro/field_row.html' with field=form.address_number label=form.address_number.label %}
      </div>
    </div>

    <div class="section-card">
      <h4>Conta de acesso</h4>
      <p class="section-note">Defina um usuário e senha para entrar novamente na plataforma.</p>
      <div class="field-rows">
        {% include 'cadastro_aventureiro/field_row.html' with field=form.username label=form.username.label %}
        {% include 'cadastro_aventureiro/field_row.html' with field=form.password label=form.password.label %}
        {% include 'cadastro_aventureiro/field_row.html' with field=form.password_confirm label=form.password_confirm.label %}
      </div>
    </div>

    <div class="section-card">
      <h4>Declaração e assinatura</h4>
      <p>Atesto serem verdadeiras as informações fornecidas.</p>
      <div class="field-grid">
        <label class="declaration-label">
          {{ form.declaration_accepted }}
          {{ form.declaration_accepted.label_tag }}
          <span class="declaration-status" data-declaration-status>Não confirmado</span>
        </label>
        {{ form.signature_data }}
      </div>
      <div class="signature-area">
        <canvas class="signature-layer" data-signature-target="id_signature_data"></canvas>
        <div class="signature-tools">
          <span>Assine acima</span>
          <button type="button" data-clear-target>Limpar</button>
        </div>
      </div>
    </div>

    <div class="actions">
      <button class="secondary-btn" name="action" value="save_draft" type="submit">Salvar rascunho</button>
      <button class="primary-btn" name="action" value="continue" type="submit">Salvar responsável e continuar</button>
    </div>
  </form>
{% endblock %}
